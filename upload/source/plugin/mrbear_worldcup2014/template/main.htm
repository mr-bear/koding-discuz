{template common/header}

<div class="mod">
	<img class="mod_banner" src="{$_G[siteurl]}source/plugin/mrbear_worldcup2014/static/image/banner.jpg"  alt="Banner">
</div>

<div class="mod">
	<div style="display:block;width:960px;margin:0 auto;">
    <div class="wctimer_inner">
        <h3 class="wctimer_hd">{lang mrbear_worldcup2014:text1_english}</h3>
        <div class="wctimer_bd clearfix">
            <span class="wctimer_item wctimer_item_day"><em id="day"></em><span>天</span></span>
            <span class="wctimer_item"><em id="hour"></em><span>时</span></span>
            <span class="wctimer_item"><em id="mini"></em><span>分</span></span>
            <span class="wctimer_item"><em id="sec"></em><span>秒</span></span>
        </div>
    </div>
    <div class="wctimer_inner" style="width:365px">
    	<h3 class="wctimer_hd_yugao">{lang mrbear_worldcup2014:text2_english}</h3>
    	<div class="wctimer_bd clearfix" id="idScroller" style="width:300px; height:19px;text-align: center">
    			<div id="idScrollMid" >
    				<ul id="liveList" style="margin:0px;padding: 0px;">

    				</ul>
    			</div>
    	</div>

    </div>
    
    <div class="wctimer_inner">
    	<h3 class="wctimer_hd">{lang mrbear_worldcup2014:text3_english}</h3>
    	<div class="wctimer_bd clearfix" id="idScrollerRes" style="width:240px; height:19px;text-align: center">
    			<div id="idScrollResMid" >
    				<ul id="resultList" style="margin:0px;padding: 0px;">

    				</ul>
    			</div>
    	</div>
    </div>
	</div>
</div>


<div class="nav">
<div class="top_nav">
	<a href="javascript:;" id="shceduleB">{lang mrbear_worldcup2014:banner1_english}</a>
	<a href="javascript:;" id="scoreB">{lang mrbear_worldcup2014:banner2_english}</a>
	<a href="javascript:;" id="distribute" >{lang mrbear_worldcup2014:banner3_english}</a>
</div>
</div>

<div class="commBox" id="shceduleTable" >
	<div class="tit">
		<span class="status">{lang mrbear_worldcup2014:shcedule1_english}</span>
		<span class="session">{lang mrbear_worldcup2014:shcedule2_english}</span>
		<span class="stage">{lang mrbear_worldcup2014:shcedule3_english}</span>
		<span class="time">{lang mrbear_worldcup2014:shcedule4_english}</span>
		<span class="game">{lang mrbear_worldcup2014:shcedule5_english}</span>
		<span class="status">{lang mrbear_worldcup2014:shcedule6_english}</span>
		<span class="liveinfo">{lang mrbear_worldcup2014:shcedule7_english}</span>
	</div>
	<div class="con">
		<div id="dateXiaozu">
			<table style="margin:auto;" border="0" cellspacing="0" cellpadding="0">
				<tbody id="liveListDetail">
				</tbody>
			</table>
		</div>
	</div>
</div>

<div class="commBox" id="scoreTable" style="display: none">
	<div class="goal">
		<img src="{$_G[siteurl]}source/plugin/mrbear_worldcup2014/static/image/scoreboardruel.jpg"/>
		<table border="0" cellspacing="0" cellpadding="0">
			<tbody id="groupATable">
				<tr>
					<td class="teama"> <em>A</em>
						{lang mrbear_worldcup2014:zu_english}
					</td>
					<td class="teamg">
						<ul>
							<li class="contu">{lang mrbear_worldcup2014:score1_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score2_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score3_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score4_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score5_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score6_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score7_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score8_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score9_english}</li>
						</ul>
					</td>
				</tr>

			</tbody>
		</table>
		<table border="0" cellspacing="0" cellpadding="0">
			<tbody id="groupBTable">
				<tr>
					<td class="teama"> <em>B</em>
						{lang mrbear_worldcup2014:zu_english}
					</td>
					<td class="teamg">
						<ul>
							<li class="contu">{lang mrbear_worldcup2014:score1_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score2_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score3_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score4_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score5_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score6_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score7_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score8_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score9_english}</li>
						</ul>
					</td>
				</tr>

			</tbody>
		</table>
		<table border="0" cellspacing="0" cellpadding="0">
			<tbody id="groupCTable">
				<tr>
					<td class="teama"> <em>C</em>
						{lang mrbear_worldcup2014:zu_english}
					</td>
					<td class="teamg">
						<ul>
							<li class="contu">{lang mrbear_worldcup2014:score1_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score2_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score3_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score4_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score5_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score6_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score7_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score8_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score9_english}</li>
						</ul>
					</td>
				</tr>

			</tbody>
		</table>
		<table border="0" cellspacing="0" cellpadding="0">
			<tbody id="groupDTable">
				<tr>
					<td class="teama"> <em>D</em>
						{lang mrbear_worldcup2014:zu_english}
					</td>
					<td class="teamg">
						<ul>
							<li class="contu">{lang mrbear_worldcup2014:score1_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score2_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score3_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score4_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score5_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score6_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score7_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score8_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score9_english}</li>
						</ul>
					</td>
				</tr>

			</tbody>
		</table>
		<table border="0" cellspacing="0" cellpadding="0">
			<tbody id="groupETable">
				<tr>
					<td class="teama"> <em>E</em>
						{lang mrbear_worldcup2014:zu_english}
					</td>
					<td class="teamg">
						<ul>
							<li class="contu">{lang mrbear_worldcup2014:score1_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score2_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score3_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score4_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score5_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score6_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score7_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score8_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score9_english}</li>
						</ul>
					</td>
				</tr>

			</tbody>
		</table>
		<table border="0" cellspacing="0" cellpadding="0">
			<tbody id="groupFTable">
				<tr>
					<td class="teama"> <em>F</em>
						{lang mrbear_worldcup2014:zu_english}
					</td>
					<td class="teamg">
						<ul>
							<li class="contu">{lang mrbear_worldcup2014:score1_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score2_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score3_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score4_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score5_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score6_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score7_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score8_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score9_english}</li>
						</ul>
					</td>
				</tr>

			</tbody>
		</table>
		<table border="0" cellspacing="0" cellpadding="0">
			<tbody id="groupGTable">
				<tr>
					<td class="teama"> <em>G</em>
						{lang mrbear_worldcup2014:zu_english}
					</td>
					<td class="teamg">
						<ul>
							<li class="contu">{lang mrbear_worldcup2014:score1_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score2_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score3_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score4_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score5_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score6_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score7_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score8_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score9_english}</li>
						</ul>
					</td>
				</tr>

			</tbody>
		</table>
		<table border="0" cellspacing="0" cellpadding="0">
			<tbody id="groupHTable">
				<tr>
					<td class="teama"> <em>H</em>
						{lang mrbear_worldcup2014:zu_english}
					</td>
					<td class="teamg">
						<ul>
							<li class="contu">{lang mrbear_worldcup2014:score1_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score2_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score3_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score4_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score5_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score6_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score7_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score8_english}</li>
							<li class="contu2">{lang mrbear_worldcup2014:score9_english}</li>
						</ul>
					</td>
				</tr>

			</tbody>
		</table>
	</div>
</div>

<div class="commBox" id="distributeTable" style="display: none">
	<img src="{$_G[siteurl]}source/plugin/mrbear_worldcup2014/static/image/teamlist.jpg" width="960px"/>
</div>


<script src="http://data.3g.cn/sports/wclive/Resource/js/jquery-1.4.2.min.js"></script>
<script src="{$_G[siteurl]}source/plugin/mrbear_worldcup2014/static/js/timeCountDown.js"></script>
<script src="{$_G[siteurl]}source/plugin/mrbear_worldcup2014/static/js/maque.js"></script>

<script>

function getTime(day){
	re = /(\d{4})(?:-(\d{1,2})(?:-(\d{1,2}))?)?(?:\s+(\d{1,2}):(\d{1,2}):(\d{1,2}))?/.exec(day);
	return new Date(re[1],(re[2]||1)-1,re[3]||1,re[4]||0,re[5]||0,re[6]||0).getTime();
}

$("#shceduleB").click(function(event) {
	$("#shceduleTable").css({
		display: 'block'
	});
	$("#scoreTable").css({
		display: 'none'
	});
	$("#distributeTable").css({
		display: 'none'
	});

	$("#shceduleB").css({
		color: '#899fc2'
	});
	$("#scoreB").css({
		color: '#244570'
	});
	$("#distribute").css({
		color: '#244570'
	});
});
$("#scoreB").click(function(event) {
	$("#shceduleTable").css({
		display: 'none'
	});
	$("#scoreTable").css({
		display: 'block'
	});
	$("#distributeTable").css({
		display: 'none'
	});
	$("#shceduleB").css({
		color: '#244570'
	});
	$("#scoreB").css({
		color: '#899fc2'
	});
	$("#distribute").css({
		color: '#244570'
	});
});
$("#distribute").click(function(event) {
	$("#shceduleTable").css({
		display: 'none'
	});
	$("#scoreTable").css({
		display: 'none'
	});
	$("#distributeTable").css({
		display: 'block'
	});

	$("#shceduleB").css({
		color: '#244570'
	});
	$("#scoreB").css({
		color: '#244570'
	});
	$("#distribute").css({
		color: '#899fc2'
	});
});
/*
$("#statiums").click(function(event) {
	$("#shceduleTable").css({
		display: 'none'
	});
	$("#scoreTable").css({
		display: 'none'
	});
	$("#distributeTable").css({
		display: 'none'
	});
	$("#statiumsTable").css({
		display: 'block'
	});

	$("#shceduleB").css({
		color: '#244570'
	});
	$("#scoreB").css({
		color: '#244570'
	});
	$("#distribute").css({
		color: '#244570'
	});
	$("#statiums").css({
		color: '#899fc2'
	});
});
*/
//schedule
$.ajax({
	url: 'http://newdata.3g.cn/jsonInterface/index.php/Worldcup/Schedule/schedule',
	type: 'GET',
	dataType: 'jsonp',
	data: 't=0',
	jsonp: 'cb',
	success:function(data){
		if(data&&data.schedule.length>0){
			var scheduleData = data.schedule;
			//roll
			var myDate = new Date();
			var unixTime = getTime(myDate);
			var liveM,liveD,liveH;
			var listArr = new Array();
			var j=0;
			var innerHtml = "";

			for (var i = 0; i < scheduleData.length; i++) {
				if(j>3){
					break;
				}
				var unixLiveTime = getTime(scheduleData[i].gametime);
				var flag = false;
				if(unixLiveTime>unixTime){
					flag = true;
				}

				if(flag){
					var itemSchedule = "<li class=\"wctimer_bd_li\">";
					itemSchedule += "("+scheduleData[i].group+" "+scheduleData[i].gametime+")"+scheduleData[i].host+"vs"+scheduleData[i].guest;
					itemSchedule += "</li>";
					innerHtml += itemSchedule;
					j++;
				}
			};
			$("#liveList").html(innerHtml);
			new Scroller("idScroller", "idScrollMid",{ Side:["up","up"], PauseHeight:19, PauseWidth:0 });

		
			//schedule list
			var listInfo = "";
			for (var i = 0; i < scheduleData.length; i++) {

				var unixLiveTime = getTime(scheduleData[i].gametime);
				var flag = false;
				if(unixLiveTime>unixTime){
					flag = true;
				}
				var beginFlag = '{lang mrbear_worldcup2014:begin_english}';
				if(!flag){
					beginFlag = '{lang mrbear_worldcup2014:end_english}';
				}
				listInfo += '<tr>';
				listInfo += '<td width="100"><span class="status before">'+beginFlag+'</span></td>';
				listInfo += '<td width="50"><span class="shuzi">'+(i+1)+'</span></td>';
				if(scheduleData[i]['group'] == 'A' || scheduleData[i]['group'] == 'B' || scheduleData[i]['group'] == 'C'|| scheduleData[i]['group'] == 'D' || scheduleData[i]['group'] == 'E' || scheduleData[i]['group'] == 'F' || scheduleData[i]['group'] == 'G' || scheduleData[i]['group'] == 'H' ){
					listInfo += '<td width="80">'+scheduleData[i]['group']+'{lang mrbear_worldcup2014:zu_english}</td>';
				}else{
					listInfo += '<td width="80">'+scheduleData[i]['group']+'</td>';
				}
				listInfo += '<td width="170"><span class="shuzi">'+scheduleData[i]['gametime']+'</span></td>';
				listInfo += '<td width="230" style="text-align:left;"><span class="lv" style="margin-left:30px;"><span class="'+scheduleData[i]['englishHost']+'" style="background-image: url(\'{$_G[siteurl]}source/plugin/mrbear_worldcup2014/static/image/countrylogo.png\');background-repeat: no-repeat;background-size: auto 1000px;display:inline-block;*zoom:1;*display:inline;width:32px;height:27px;margin-bottom:-8px;"></span>'+scheduleData[i]['host'].replace(/[ ]/g,"")+'<em>VS</em>'+'<span class="'+scheduleData[i]['englishGuest'].replace(/[ ]/g,"")+'" style="background-image: url(\'{$_G[siteurl]}source/plugin/mrbear_worldcup2014/static/image/countrylogo.png\');background-repeat: no-repeat;background-size: auto 1000px;display:inline-block;*zoom:1;*display:inline;width:32px;height:27px;margin-bottom:-8px;"></span>'+scheduleData[i]['guest']+'</span></td>';
				listInfo += '<td width="100">'+scheduleData[i]['place']+'</td>';
				listInfo += '<td width="200"><a href="http://kbs.sports.qq.com/#&type=4" target="_blank">{lang mrbear_worldcup2014:qq_english}</a>|<a href="http://sports.sina.com.cn/tv/" target="_blank">{lang mrbear_worldcup2014:sina_english}</a>|<a href="http://tv.cntv.cn/live/cctv5/" target="_blank">CCTV5</a></td>';
				listInfo += '</tr>';
			}
			$("#liveListDetail").html(listInfo);

			//new result
			innerHtml = "";
			j = 0;
			for (var i = 0; i < scheduleData.length; i++) {
				var unixLiveTime = getTime(scheduleData[i].gametime);
				if(unixLiveTime>unixTime){
					break;
				}
			};
			if(i>0){
				for(var ii = i-1; ii>=0; ii--){
					if(j>3){
						break;
					}
					var itemSchedule = "<li class=\"wctimer_bd_li\">";
					itemSchedule += "("+scheduleData[ii].gametime.substr(0,10)+")"+scheduleData[ii].host+scheduleData[ii].score+scheduleData[ii].guest;
					itemSchedule += "</li>";
					innerHtml += itemSchedule;
					j++;
				}
				$("#resultList").html(innerHtml);
			}else{
				$("#resultList").html('{lang mrbear_worldcup2014:noevent_english}');
			}
			new Scroller("idScrollerRes", "idScrollResMid",{ Side:["up","up"], PauseHeight:19, PauseWidth:0 });

		}
			

	}
})


//score
$.ajax({
	url: 'http://newdata.3g.cn/jsonInterface/index.php/Worldcup/Data/scoreboard',
	type: 'GET',
	dataType: 'jsonp',
	jsonp: 'cb',
	success:function(data){

		if(data && data.scoreboard.length>0){
			var dataCount = data.scoreboard.length;
			var scoreboardInfo = data.scoreboard;
			var groupArr = new Array('A','B','C','D','E','F','G','H');
			//A
			var itemInfo = '';
			for(var i = 0; i < dataCount; i++){
				itemInfo = '<tr>';
				itemInfo += '<td class="team1"> <em>'+(i%4+1)+'</em></td>';
				itemInfo += '<td class="teamcity">';
				itemInfo += '<ul>';
				itemInfo += '<li class="contu"><span class="'+scoreboardInfo[i]['englishName'].replace(/[ ]/g,"")+'" style="background-image: url(\'{$_G[siteurl]}source/plugin/mrbear_worldcup2014/static/image/countrylogo.png\');background-repeat: no-repeat;background-size: auto 1000px;display:inline-block;*zoom:1;*display:inline;width:32px;height:27px;margin-bottom:-8px;"></span>'+scoreboardInfo[i]['teamName']+'</li>';
				itemInfo += '<li class="contu2 grey">'+scoreboardInfo[i]['total']+'</li>';
				itemInfo += '<li class="contu2">'+scoreboardInfo[i]['win']+'</li>';
				itemInfo += '<li class="contu2 grey">'+scoreboardInfo[i]['draw']+'</li>';
				itemInfo += '<li class="contu2">'+scoreboardInfo[i]['lose']+'</li>';
				itemInfo += '<li class="contu2 grey">'+scoreboardInfo[i]['goal']+'</li>';
				itemInfo += '<li class="contu2">'+scoreboardInfo[i]['lost']+'</li>';
				itemInfo += '<li class="contu2 grey">'+scoreboardInfo[i]['gd']+'</li>';
				itemInfo += '<li class="contu2">'+scoreboardInfo[i]['score']+'</li>';
				itemInfo += '</ul></td></tr>';

				$("#group"+groupArr[parseInt(i/4)]+"Table").append(itemInfo);
			}
			
		}
	}
})

var zxx = {
  $: function(id){
    return document.getElementById(id); 
  },
  futureDate: Date.UTC(2014,05,13,4,0),
  obj: function(){
    return {
      sec: zxx.$("sec"),
      mini: zxx.$("mini"),
      hour: zxx.$("hour"),
      day: zxx.$("day")
    }
  }
};
fnTimeCountDown(zxx.futureDate, zxx.obj());



</script>

